function B(t){return t.split("-")[0]}function M(t){return t.split("-")[1]}function $(t){return["top","bottom"].includes(B(t))?"x":"y"}function K(t){return t==="y"?"height":"width"}function j(t,n,e){let{reference:i,floating:o}=t;const c=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,r=$(n),l=K(r),f=i[l]/2-o[l]/2,h=B(n),u=r==="x";let a;switch(h){case"top":a={x:c,y:i.y-o.height};break;case"bottom":a={x:c,y:i.y+i.height};break;case"right":a={x:i.x+i.width,y:s};break;case"left":a={x:i.x-o.width,y:s};break;default:a={x:i.x,y:i.y}}switch(M(n)){case"start":a[r]-=f*(e&&u?-1:1);break;case"end":a[r]+=f*(e&&u?-1:1);break}return a}const rt=async(t,n,e)=>{const{placement:i="bottom",strategy:o="absolute",middleware:c=[],platform:s}=e,r=c.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(n));let f=await s.getElementRects({reference:t,floating:n,strategy:o}),{x:h,y:u}=j(f,i,l),a=i,d={},g=0;for(let p=0;p<r.length;p++){const{name:O,fn:k}=r[p],{x:D,y:T,data:C,reset:w}=await k({x:h,y:u,initialPlacement:i,placement:a,strategy:o,middlewareData:d,rects:f,platform:s,elements:{reference:t,floating:n}});if(h=D!=null?D:h,u=T!=null?T:u,d={...d,[O]:{...d[O],...C}},w&&g<=50){g++,typeof w=="object"&&(w.placement&&(a=w.placement),w.rects&&(f=w.rects===!0?await s.getElementRects({reference:t,floating:n,strategy:o}):w.rects),{x:h,y:u}=j(f,a,l)),p=-1;continue}}return{x:h,y:u,placement:a,strategy:o,middlewareData:d}};function st(t){return{top:0,right:0,bottom:0,left:0,...t}}function ct(t){return typeof t!="number"?st(t):{top:t,right:t,bottom:t,left:t}}function Y(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const lt=Math.min,ft=Math.max;function ut(t,n,e){return ft(t,lt(n,e))}const Rt=t=>({name:"arrow",options:t,async fn(n){const{element:e,padding:i=0}=t!=null?t:{},{x:o,y:c,placement:s,rects:r,platform:l}=n;if(e==null)return{};const f=ct(i),h={x:o,y:c},u=$(s),a=M(s),d=K(u),g=await l.getDimensions(e),p=u==="y"?"top":"left",O=u==="y"?"bottom":"right",k=r.reference[d]+r.reference[u]-h[u]-r.floating[d],D=h[u]-r.reference[u],T=await(l.getOffsetParent==null?void 0:l.getOffsetParent(e));let C=T?u==="y"?T.clientHeight||0:T.clientWidth||0:0;C===0&&(C=r.floating[d]);const w=k/2-D/2,N=f[p],_=C-g[d]-f[O],L=C/2-g[d]/2+w,S=ut(N,L,_),it=(a==="start"?f[p]:f[O])>0&&L!==S&&r.reference[d]<=r.floating[d]?L<N?N-L:_-L:0;return{[u]:h[u]-it,data:{[u]:S,centerOffset:L-S}}}});async function at(t,n){const{placement:e,platform:i,elements:o}=t,c=await(i.isRTL==null?void 0:i.isRTL(o.floating)),s=B(e),r=M(e),l=$(e)==="x",f=["left","top"].includes(s)?-1:1,h=c&&l?-1:1,u=typeof n=="function"?n(t):n;let{mainAxis:a,crossAxis:d,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return r&&typeof g=="number"&&(d=r==="end"?g*-1:g),l?{x:d*h,y:a*f}:{x:a*f,y:d*h}}const Ot=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:i}=n,o=await at(n,t);return{x:e+o.x,y:i+o.y,data:o}}}};function Q(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function y(t){if(t==null)return window;if(!Q(t)){const n=t.ownerDocument;return n&&n.defaultView||window}return t}function x(t){return y(t).getComputedStyle(t)}function b(t){return Q(t)?"":t?(t.nodeName||"").toLowerCase():""}function Z(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(n=>n.brand+"/"+n.version).join(" "):navigator.userAgent}function m(t){return t instanceof y(t).HTMLElement}function R(t){return t instanceof y(t).Element}function dt(t){return t instanceof y(t).Node}function I(t){if(typeof ShadowRoot>"u")return!1;const n=y(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function P(t){const{overflow:n,overflowX:e,overflowY:i,display:o}=x(t);return/auto|scroll|overlay|hidden/.test(n+i+e)&&!["inline","contents"].includes(o)}function ht(t){return["table","td","th"].includes(b(t))}function F(t){const n=/firefox/i.test(Z()),e=x(t),i=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||(i?i!=="none":!1)||n&&e.willChange==="filter"||n&&(e.filter?e.filter!=="none":!1)||["transform","perspective"].some(o=>e.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const c=e.contain;return c!=null?c.includes(o):!1})}function tt(){return!/^((?!chrome|android).)*safari/i.test(Z())}function X(t){return["html","body","#document"].includes(b(t))}const z=Math.min,V=Math.max,W=Math.round;function A(t,n,e){var i,o,c,s;n===void 0&&(n=!1),e===void 0&&(e=!1);const r=t.getBoundingClientRect();let l=1,f=1;n&&m(t)&&(l=t.offsetWidth>0&&W(r.width)/t.offsetWidth||1,f=t.offsetHeight>0&&W(r.height)/t.offsetHeight||1);const h=R(t)?y(t):window,u=!tt()&&e,a=(r.left+(u&&(i=(o=h.visualViewport)==null?void 0:o.offsetLeft)!=null?i:0))/l,d=(r.top+(u&&(c=(s=h.visualViewport)==null?void 0:s.offsetTop)!=null?c:0))/f,g=r.width/l,p=r.height/f;return{width:g,height:p,top:d,right:a+g,bottom:d+p,left:a,x:a,y:d}}function v(t){return((dt(t)?t.ownerDocument:t.document)||window.document).documentElement}function H(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function nt(t){return A(v(t)).left+H(t).scrollLeft}function gt(t){const n=A(t);return W(n.width)!==t.offsetWidth||W(n.height)!==t.offsetHeight}function pt(t,n,e){const i=m(n),o=v(n),c=A(t,i&&gt(n),e==="fixed");let s={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(i||!i&&e!=="fixed")if((b(n)!=="body"||P(o))&&(s=H(n)),m(n)){const l=A(n,!0);r.x=l.x+n.clientLeft,r.y=l.y+n.clientTop}else o&&(r.x=nt(o));return{x:c.left+s.scrollLeft-r.x,y:c.top+s.scrollTop-r.y,width:c.width,height:c.height}}function E(t){if(b(t)==="html")return t;const n=t.assignedSlot||t.parentNode||(I(t)?t.host:null)||v(t);return I(n)?n.host:n}function U(t){return!m(t)||x(t).position==="fixed"?null:t.offsetParent}function wt(t){let n=E(t);for(;m(n)&&!X(n);){if(F(n))return n;n=E(n)}return null}function q(t){const n=y(t);let e=U(t);for(;e&&ht(e)&&x(e).position==="static";)e=U(e);return e&&(b(e)==="html"||b(e)==="body"&&x(e).position==="static"&&!F(e))?n:e||wt(t)||n}function G(t){if(m(t))return{width:t.offsetWidth,height:t.offsetHeight};const n=A(t);return{width:n.width,height:n.height}}function mt(t){let{rect:n,offsetParent:e,strategy:i}=t;const o=m(e),c=v(e);if(e===c)return n;let s={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if((o||!o&&i!=="fixed")&&((b(e)!=="body"||P(c))&&(s=H(e)),m(e))){const l=A(e,!0);r.x=l.x+e.clientLeft,r.y=l.y+e.clientTop}return{...n,x:n.x-s.scrollLeft+r.x,y:n.y-s.scrollTop+r.y}}function yt(t,n){const e=y(t),i=v(t),o=e.visualViewport;let c=i.clientWidth,s=i.clientHeight,r=0,l=0;if(o){c=o.width,s=o.height;const f=tt();(f||!f&&n==="fixed")&&(r=o.offsetLeft,l=o.offsetTop)}return{width:c,height:s,x:r,y:l}}function xt(t){var n;const e=v(t),i=H(t),o=(n=t.ownerDocument)==null?void 0:n.body,c=V(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=V(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let r=-i.scrollLeft+nt(t);const l=-i.scrollTop;return x(o||e).direction==="rtl"&&(r+=V(e.clientWidth,o?o.clientWidth:0)-c),{width:c,height:s,x:r,y:l}}function et(t){const n=E(t);return X(n)?t.ownerDocument.body:m(n)&&P(n)?n:et(n)}function ot(t,n){var e;n===void 0&&(n=[]);const i=et(t),o=i===((e=t.ownerDocument)==null?void 0:e.body),c=y(i),s=o?[c].concat(c.visualViewport||[],P(i)?i:[]):i,r=n.concat(s);return o?r:r.concat(ot(s))}function bt(t,n){const e=A(t,!1,n==="fixed"),i=e.top+t.clientTop,o=e.left+t.clientLeft;return{top:i,left:o,x:o,y:i,right:o+t.clientWidth,bottom:i+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}function J(t,n,e){return n==="viewport"?Y(yt(t,e)):R(n)?bt(n,e):Y(xt(v(t)))}function vt(t){let n=ot(t).filter(o=>R(o)&&b(o)!=="body"),e=t,i=null;for(;R(e)&&!X(e);){const o=x(e);o.position==="static"&&i&&["absolute","fixed"].includes(i.position)&&!F(e)?n=n.filter(c=>c!==e):i=o,e=E(e)}return n}function At(t){let{element:n,boundary:e,rootBoundary:i,strategy:o}=t;const s=[...e==="clippingAncestors"?vt(n):[].concat(e),i],r=s[0],l=s.reduce((f,h)=>{const u=J(n,h,o);return f.top=V(u.top,f.top),f.right=z(u.right,f.right),f.bottom=z(u.bottom,f.bottom),f.left=V(u.left,f.left),f},J(n,r,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const Tt={getClippingRect:At,convertOffsetParentRelativeRectToViewportRelativeRect:mt,isElement:R,getDimensions:G,getOffsetParent:q,getDocumentElement:v,getElementRects:t=>{let{reference:n,floating:e,strategy:i}=t;return{reference:pt(n,q(e),i),floating:{...G(e),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>x(t).direction==="rtl"},Vt=(t,n,e)=>rt(t,n,{platform:Tt,...e});export{Rt as a,Vt as c,Ot as o};
