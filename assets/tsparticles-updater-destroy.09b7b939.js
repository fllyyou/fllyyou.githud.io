import{J as d,I as a,j as m,A as g,F as l,W as v,X as p,Q as c,o as b}from"./tsparticles-engine.62396409.js";class O{load(t){!t||(t.bottom!==void 0&&(this.bottom=d(t.bottom)),t.left!==void 0&&(this.left=d(t.left)),t.right!==void 0&&(this.right=d(t.right)),t.top!==void 0&&(this.top=d(t.top)))}}class z extends a{constructor(){super(),this.value=3}}class x extends a{constructor(){super(),this.value={min:4,max:9}}}class w{constructor(){this.count=1,this.factor=new z,this.rate=new x,this.sizeOffset=!0}load(t){!t||(t.count!==void 0&&(this.count=t.count),this.factor.load(t.factor),this.rate.load(t.rate),this.particles=m(t.particles,o=>g({},o)),t.sizeOffset!==void 0&&(this.sizeOffset=t.sizeOffset))}}class B{constructor(){this.bounds=new O,this.mode="none",this.split=new w}load(t){!t||(t.mode&&(this.mode=t.mode),t.bounds&&this.bounds.load(t.bounds),this.split.load(t.split))}}class S{constructor(t,o){this.engine=t,this.container=o}init(t){const o=this.container,s=t.options,n=s.destroy;if(!n)return;t.splitCount=0;const e=n.bounds;t.destroyBounds||(t.destroyBounds={}),e.bottom&&(t.destroyBounds.bottom=l(e.bottom)*o.canvas.size.height/100),e.left&&(t.destroyBounds.left=l(e.left)*o.canvas.size.width/100),e.right&&(t.destroyBounds.right=l(e.right)*o.canvas.size.width/100),e.top&&(t.destroyBounds.top=l(e.top)*o.canvas.size.height/100)}isEnabled(t){return!t.destroyed}loadOptions(t,...o){t.destroy||(t.destroy=new B);for(const s of o)t.destroy.load(s==null?void 0:s.destroy)}particleDestroyed(t,o){if(o)return;const s=t.options.destroy;s&&s.mode==="split"&&this.split(t)}update(t){if(!this.isEnabled(t))return;const o=t.getPosition(),s=t.destroyBounds;!s||(s.bottom!==void 0&&o.y>=s.bottom||s.left!==void 0&&o.x<=s.left||s.right!==void 0&&o.x>=s.right||s.top!==void 0&&o.y<=s.top)&&t.destroy()}addSplitParticle(t,o){const s=t.options.destroy;if(!s)return;const n=s.split,e=v(this.engine,this.container,t.options),r=p(n.factor);e.color.load({value:{hsl:t.getFillColor()}}),e.move.load({center:{x:t.position.x,y:t.position.y,mode:"precise"}}),typeof e.size.value=="number"?e.size.value/=r:(e.size.value.min/=r,e.size.value.max/=r),e.load(o);const h=n.sizeOffset?d(-t.size.value,t.size.value):0,y={x:t.position.x+c(h),y:t.position.y+c(h)};return this.container.particles.addParticle(y,e,t.group,u=>{var f;return u.size.value<.5?!1:(u.velocity.length=c(d(t.velocity.length,u.velocity.length)),u.splitCount=((f=t.splitCount)!==null&&f!==void 0?f:0)+1,u.unbreakable=!0,setTimeout(()=>{u.unbreakable=!1},500),!0)})}split(t){const o=t.options.destroy;if(!o)return;const s=o.split;if(s.count>=0&&(t.splitCount===void 0||t.splitCount++>s.count))return;const n=p(s.rate),e=b(s.particles);for(let r=0;r<n;r++)this.addSplitParticle(t,e)}}async function P(i){await i.addParticleUpdater("destroy",t=>new S(i,t))}export{P as l};
